"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9586],{4983:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"cookbook/twitter","title":"Twitter Like API","description":"Twitter like API recipe","source":"@site/docs/cookbook/twitter.md","sourceDirName":"cookbook","slug":"/cookbook/twitter","permalink":"/docs/cookbook/twitter","draft":false,"unlisted":false,"editUrl":"https://github.com/labstack/echox/blob/master/website/docs/cookbook/twitter.md","tags":[],"version":"current","frontMatter":{"description":"Twitter like API recipe"},"sidebar":"docsSidebar","previous":{"title":"Timeout","permalink":"/docs/cookbook/timeout"},"next":{"title":"WebSocket","permalink":"/docs/cookbook/websocket"}}');var l=s(4848),o=s(8453);const r={description:"Twitter like API recipe"},d="Twitter Like API",c={},t=[{value:"Models",id:"models",level:2},{value:"Handlers",id:"handlers",level:2},{value:"Server",id:"server",level:2},{value:"API",id:"api",level:2},{value:"Signup",id:"signup",level:3},{value:"Request",id:"request",level:4},{value:"Response",id:"response",level:4},{value:"Login",id:"login",level:3},{value:"Request",id:"request-1",level:4},{value:"Response",id:"response-1",level:4},{value:"Follow",id:"follow",level:3},{value:"Request",id:"request-2",level:4},{value:"Response",id:"response-2",level:4},{value:"Post",id:"post",level:3},{value:"Request",id:"request-3",level:4},{value:"Response",id:"response-3",level:4},{value:"Feed",id:"feed",level:3},{value:"Request",id:"request-4",level:4},{value:"Response",id:"response-4",level:4}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"twitter-like-api",children:"Twitter Like API"})}),"\n",(0,l.jsx)(n.p,{children:"This recipe demonstrates how to create a Twitter like REST API using MongoDB (Database),\nJWT (API security) and JSON (Data exchange)."}),"\n",(0,l.jsx)(n.h2,{id:"models",children:"Models"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",metastring:"reference",children:"https://github.com/labstack/echox/blob/master/cookbook/twitter/model/user.go\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",metastring:"reference",children:"https://github.com/labstack/echox/blob/master/cookbook/twitter/model/post.go\n"})}),"\n",(0,l.jsx)(n.h2,{id:"handlers",children:"Handlers"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",metastring:"reference",children:"https://github.com/labstack/echox/blob/master/cookbook/twitter/handler/handler.go\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",metastring:"reference",children:"https://github.com/labstack/echox/blob/master/cookbook/twitter/handler/user.go\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",metastring:"reference",children:"https://github.com/labstack/echox/blob/master/cookbook/twitter/handler/post.go\n"})}),"\n",(0,l.jsx)(n.h2,{id:"server",children:"Server"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",metastring:"reference",children:"https://github.com/labstack/echox/blob/master/cookbook/twitter/server.go\n"})}),"\n",(0,l.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,l.jsx)(n.h3,{id:"signup",children:"Signup"}),"\n",(0,l.jsx)(n.p,{children:"User signup"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Retrieve user credentials from the body and validate against database."}),"\n",(0,l.jsxs)(n.li,{children:["For invalid email or password, send ",(0,l.jsx)(n.code,{children:"400 - Bad Request"})," response."]}),"\n",(0,l.jsxs)(n.li,{children:["For valid email and password, save user in database and send ",(0,l.jsx)(n.code,{children:"201 - Created"})," response."]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"request",children:"Request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:'curl \\\n  -X POST \\\n  http://localhost:1323/signup \\\n  -H "Content-Type: application/json" \\\n  -d \'{"email":"jon@labstack.com","password":"shhh!"}\'\n'})}),"\n",(0,l.jsx)(n.h4,{id:"response",children:"Response"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"201 - Created"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'{\n  "id": "58465b4ea6fe886d3215c6df",\n  "email": "jon@labstack.com",\n  "password": "shhh!"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"login",children:"Login"}),"\n",(0,l.jsx)(n.p,{children:"User login"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Retrieve user credentials from the body and validate against database."}),"\n",(0,l.jsxs)(n.li,{children:["For invalid credentials, send ",(0,l.jsx)(n.code,{children:"401 - Unauthorized"})," response."]}),"\n",(0,l.jsxs)(n.li,{children:["For valid credentials, send ",(0,l.jsx)(n.code,{children:"200 - OK"})," response:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Generate JWT for the user and send it as response."}),"\n",(0,l.jsxs)(n.li,{children:["Each subsequent request must include JWT in the ",(0,l.jsx)(n.code,{children:"Authorization"})," header."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"POST"})," ",(0,l.jsx)(n.code,{children:"/login"})]}),"\n",(0,l.jsx)(n.h4,{id:"request-1",children:"Request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:'curl \\\n  -X POST \\\n  http://localhost:1323/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{"email":"jon@labstack.com","password":"shhh!"}\'\n'})}),"\n",(0,l.jsx)(n.h4,{id:"response-1",children:"Response"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"200 - OK"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'{\n  "id": "58465b4ea6fe886d3215c6df",\n  "email": "jon@labstack.com",\n  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0ODEyNjUxMjgsImlkIjoiNTg0NjViNGVhNmZlODg2ZDMyMTVjNmRmIn0.1IsGGxko1qMCsKkJDQ1NfmrZ945XVC9uZpcvDnKwpL0"\n}\n'})}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:"Client should store the token, for browsers, you may use local storage."})}),"\n",(0,l.jsx)(n.h3,{id:"follow",children:"Follow"}),"\n",(0,l.jsx)(n.p,{children:"Follow a user"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["For invalid token, send ",(0,l.jsx)(n.code,{children:"400 - Bad Request"})," response."]}),"\n",(0,l.jsxs)(n.li,{children:["For valid token:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["If user is not found, send ",(0,l.jsx)(n.code,{children:"404 - Not Found"})," response."]}),"\n",(0,l.jsxs)(n.li,{children:["Add a follower to the specified user in the path parameter and send ",(0,l.jsx)(n.code,{children:"200 - OK"})," response."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"POST"})," ",(0,l.jsx)(n.code,{children:"/follow/:id"})]}),"\n",(0,l.jsx)(n.h4,{id:"request-2",children:"Request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:'curl \\\n  -X POST \\\n  http://localhost:1323/follow/58465b4ea6fe886d3215c6df \\\n  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0ODEyNjUxMjgsImlkIjoiNTg0NjViNGVhNmZlODg2ZDMyMTVjNmRmIn0.1IsGGxko1qMCsKkJDQ1NfmrZ945XVC9uZpcvDnKwpL0"\n'})}),"\n",(0,l.jsx)(n.h4,{id:"response-2",children:"Response"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"200 - OK"})}),"\n",(0,l.jsx)(n.h3,{id:"post",children:"Post"}),"\n",(0,l.jsx)(n.p,{children:"Post a message to specified user"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["For invalid request payload, send ",(0,l.jsx)(n.code,{children:"400 - Bad Request"})," response."]}),"\n",(0,l.jsxs)(n.li,{children:["If user is not found, send ",(0,l.jsx)(n.code,{children:"404 - Not Found"})," response."]}),"\n",(0,l.jsxs)(n.li,{children:["Otherwise save post in the database and return it via ",(0,l.jsx)(n.code,{children:"201 - Created"})," response."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"POST"})," ",(0,l.jsx)(n.code,{children:"/posts"})]}),"\n",(0,l.jsx)(n.h4,{id:"request-3",children:"Request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:'curl \\\n  -X POST \\\n  http://localhost:1323/posts \\\n  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0ODEyNjUxMjgsImlkIjoiNTg0NjViNGVhNmZlODg2ZDMyMTVjNmRmIn0.1IsGGxko1qMCsKkJDQ1NfmrZ945XVC9uZpcvDnKwpL0" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"to":"58465b4ea6fe886d3215c6df","message":"hello"}\'\n'})}),"\n",(0,l.jsx)(n.h4,{id:"response-3",children:"Response"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"201 - Created"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'{\n  "id": "584661b9a6fe8871a3804cba",\n  "to": "58465b4ea6fe886d3215c6df",\n  "from": "58465b4ea6fe886d3215c6df",\n  "message": "hello"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"feed",children:"Feed"}),"\n",(0,l.jsxs)(n.p,{children:["List most recent messages based on optional ",(0,l.jsx)(n.code,{children:"page"})," and ",(0,l.jsx)(n.code,{children:"limit"})," query parameters"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"GET"})," ",(0,l.jsx)(n.code,{children:"/feed?page=1&limit=5"})]}),"\n",(0,l.jsx)(n.h4,{id:"request-4",children:"Request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:'curl \\\n  -X GET \\\n  http://localhost:1323/feed \\\n  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0ODEyNjUxMjgsImlkIjoiNTg0NjViNGVhNmZlODg2ZDMyMTVjNmRmIn0.1IsGGxko1qMCsKkJDQ1NfmrZ945XVC9uZpcvDnKwpL0"\n'})}),"\n",(0,l.jsx)(n.h4,{id:"response-4",children:"Response"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"200 - OK"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'[\n  {\n    "id": "584661b9a6fe8871a3804cba",\n    "to": "58465b4ea6fe886d3215c6df",\n    "from": "58465b4ea6fe886d3215c6df",\n    "message": "hello"\n  }\n]\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var i=s(6540);const l={},o=i.createContext(l);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);