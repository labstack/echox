"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3504],{4673:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"guide/request","title":"Request","description":"Handling request","source":"@site/docs/guide/request.md","sourceDirName":"guide","slug":"/request","permalink":"/docs/request","draft":false,"unlisted":false,"editUrl":"https://github.com/labstack/echox/blob/master/website/docs/guide/request.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"description":"Handling request","slug":"/request","sidebar_position":9},"sidebar":"docsSidebar","previous":{"title":"IP Address","permalink":"/docs/ip-address"},"next":{"title":"Response","permalink":"/docs/response"}}');var t=r(4848),s=r(8453);const i={description:"Handling request",slug:"/request",sidebar_position:9},o="Request",d={},l=[{value:"Retrieve Data",id:"retrieve-data",level:2},{value:"Form Data",id:"form-data",level:3},{value:"Query Parameters",id:"query-parameters",level:3},{value:"Path Parameters",id:"path-parameters",level:3},{value:"Binding Data",id:"binding-data",level:3},{value:"Validate Data",id:"validate-data",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"request",children:"Request"})}),"\n",(0,t.jsx)(n.h2,{id:"retrieve-data",children:"Retrieve Data"}),"\n",(0,t.jsx)(n.h3,{id:"form-data",children:"Form Data"}),"\n",(0,t.jsxs)(n.p,{children:["Form data can be retrieved by name using ",(0,t.jsx)(n.code,{children:"Context#FormValue(name string)"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Handler\nfunc(c echo.Context) error {\n  name := c.FormValue("name")\n  return c.String(http.StatusOK, name)\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"curl -X POST http://localhost:1323 -d 'name=Joe'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To bind a custom data type, you can implement ",(0,t.jsx)(n.code,{children:"Echo#BindUnmarshaler"})," interface."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"type Timestamp time.Time\n\nfunc (t *Timestamp) UnmarshalParam(src string) error {\n  ts, err := time.Parse(time.RFC3339, src)\n  *t = Timestamp(ts)\n  return err\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,t.jsxs)(n.p,{children:["Query parameters can be retrieved by name using ",(0,t.jsx)(n.code,{children:"Context#QueryParam(name string)"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Handler\nfunc(c echo.Context) error {\n  name := c.QueryParam("name")\n  return c.String(http.StatusOK, name)\n})\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"curl \\\n  -X GET \\\n  http://localhost:1323\\?name\\=Joe\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Similar to form data, custom data type can be bind using ",(0,t.jsx)(n.code,{children:"Context#QueryParam(name string)"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"path-parameters",children:"Path Parameters"}),"\n",(0,t.jsxs)(n.p,{children:["Registered path parameters can be retrieved by name using ",(0,t.jsx)(n.code,{children:"Context#Param(name string) string"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'e.GET("/users/:name", func(c echo.Context) error {\n  name := c.Param("name")\n  return c.String(http.StatusOK, name)\n})\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"curl http://localhost:1323/users/Joe\n"})}),"\n",(0,t.jsx)(n.h3,{id:"binding-data",children:"Binding Data"}),"\n",(0,t.jsxs)(n.p,{children:["Also binding of request data to native Go structs and variables is supported.\nSee ",(0,t.jsx)(n.a,{href:"/docs/binding",children:"Binding Data"})]}),"\n",(0,t.jsx)(n.h2,{id:"validate-data",children:"Validate Data"}),"\n",(0,t.jsxs)(n.p,{children:["Echo doesn't have built-in data validation capabilities, however, you can register\na custom validator using ",(0,t.jsx)(n.code,{children:"Echo#Validator"})," and leverage third-party ",(0,t.jsx)(n.a,{href:"https://github.com/avelino/awesome-go#validation",children:"libraries"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Example below uses ",(0,t.jsx)(n.a,{href:"https://github.com/go-playground/validator",children:"https://github.com/go-playground/validator"})," framework for validation:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n  "net/http"\n\n  "github.com/go-playground/validator"\n  "github.com/labstack/echo/v4"\n  "github.com/labstack/echo/v4/middleware"\n)\n\ntype (\n  User struct {\n    Name  string `json:"name" validate:"required"`\n    Email string `json:"email" validate:"required,email"`\n  }\n\n  CustomValidator struct {\n    validator *validator.Validate\n  }\n)\n\nfunc (cv *CustomValidator) Validate(i interface{}) error {\n  if err := cv.validator.Struct(i); err != nil {\n    // Optionally, you could return the error to give each route more control over the status code\n    return echo.NewHTTPError(http.StatusBadRequest, err.Error())\n  }\n  return nil\n}\n\nfunc main() {\n  e := echo.New()\n  e.Validator = &CustomValidator{validator: validator.New()}\n  e.POST("/users", func(c echo.Context) (err error) {\n    u := new(User)\n    if err = c.Bind(u); err != nil {\n      return echo.NewHTTPError(http.StatusBadRequest, err.Error())\n    }\n    if err = c.Validate(u); err != nil {\n      return err\n    }\n    return c.JSON(http.StatusOK, u)\n  })\n  e.Logger.Fatal(e.Start(":1323"))\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'curl -X POST http://localhost:1323/users \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{"name":"Joe","email":"joe@invalid-domain"}\'\n{"message":"Key: \'User.Email\' Error:Field validation for \'Email\' failed on the \'email\' tag"}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var a=r(6540);const t={},s=a.createContext(t);function i(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);