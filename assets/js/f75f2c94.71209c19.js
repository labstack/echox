"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3615],{7312:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>s});var o=r(5893),i=r(1151);const t={description:"Recover middleware"},a="Recover",l={id:"middleware/recover",title:"Recover",description:"Recover middleware",source:"@site/docs/middleware/recover.md",sourceDirName:"middleware",slug:"/middleware/recover",permalink:"/docs/middleware/recover",draft:!1,unlisted:!1,editUrl:"https://github.com/labstack/echox/blob/master/website/docs/middleware/recover.md",tags:[],version:"current",frontMatter:{description:"Recover middleware"},sidebar:"docsSidebar",previous:{title:"Rate Limiter",permalink:"/docs/middleware/rate-limiter"},next:{title:"Redirect",permalink:"/docs/middleware/redirect"}},c={},s=[{value:"Usage",id:"usage",level:2},{value:"Custom Configuration",id:"custom-configuration",level:2},{value:"Usage",id:"usage-1",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Default Configuration",id:"default-configuration",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"recover",children:"Recover"})}),"\n",(0,o.jsxs)(n.p,{children:["Recover middleware recovers from panics anywhere in the chain, prints stack trace\nand handles the control to the centralized\n",(0,o.jsx)(n.a,{href:"/docs/customization#http-error-handler",children:"HTTPErrorHandler"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"e.Use(middleware.Recover())\n"})}),"\n",(0,o.jsx)(n.h2,{id:"custom-configuration",children:"Custom Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"usage-1",children:"Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"e := echo.New()\ne.Use(middleware.RecoverWithConfig(middleware.RecoverConfig{\n  StackSize: 1 << 10, // 1 KB\n  LogLevel:  log.ERROR,\n}))\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Example above uses a ",(0,o.jsx)(n.code,{children:"StackSize"})," of 1 KB, ",(0,o.jsx)(n.code,{children:"LogLevel"})," of error and\ndefault values for ",(0,o.jsx)(n.code,{children:"DisableStackAll"})," and ",(0,o.jsx)(n.code,{children:"DisablePrintStack"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'// LogErrorFunc defines a function for custom logging in the middleware.\nLogErrorFunc func(c echo.Context, err error, stack []byte) error\n\nRecoverConfig struct {\n  // Skipper defines a function to skip middleware.\n  Skipper Skipper\n\n  // Size of the stack to be printed.\n  // Optional. Default value 4KB.\n  StackSize int `yaml:"stack_size"`\n\n  // DisableStackAll disables formatting stack traces of all other goroutines\n  // into buffer after the trace for the current goroutine.\n  // Optional. Default value false.\n  DisableStackAll bool `yaml:"disable_stack_all"`\n\n  // DisablePrintStack disables printing stack trace.\n  // Optional. Default value as false.\n  DisablePrintStack bool `yaml:"disable_print_stack"`\n\n  // LogLevel is log level to printing stack trace.\n  // Optional. Default value 0 (Print).\n  LogLevel log.Lvl\n\n  // LogErrorFunc defines a function for custom logging in the middleware.\n  // If it\'s set you don\'t need to provide LogLevel for config.\n  LogErrorFunc LogErrorFunc\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"default-configuration",children:"Default Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"DefaultRecoverConfig = RecoverConfig{\n  Skipper:           DefaultSkipper,\n  StackSize:         4 << 10, // 4 KB\n  DisableStackAll:   false,\n  DisablePrintStack: false,\n  LogLevel:          0,\n  LogErrorFunc:      nil,\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>l,a:()=>a});var o=r(7294);const i={},t=o.createContext(i);function a(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);