"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3504],{4673:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"guide/request","title":"Request","description":"Handling request","source":"@site/docs/guide/request.md","sourceDirName":"guide","slug":"/request","permalink":"/docs/request","draft":false,"unlisted":false,"editUrl":"https://github.com/labstack/echox/blob/master/website/docs/guide/request.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"description":"Handling request","slug":"/request","sidebar_position":9},"sidebar":"docsSidebar","previous":{"title":"IP Address","permalink":"/docs/ip-address"},"next":{"title":"Response","permalink":"/docs/response"}}');var a=r(4848),s=r(8453);const i={description:"Handling request",slug:"/request",sidebar_position:9},o="Request",c={},l=[{value:"Retrieve Data",id:"retrieve-data",level:2},{value:"Form Data",id:"form-data",level:3},{value:"Query Parameters",id:"query-parameters",level:3},{value:"Path Parameters",id:"path-parameters",level:3},{value:"Binding Data",id:"binding-data",level:3},{value:"Validate Data",id:"validate-data",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"request",children:"Request"})}),"\n",(0,a.jsx)(n.h2,{id:"retrieve-data",children:"Retrieve Data"}),"\n",(0,a.jsx)(n.h3,{id:"form-data",children:"Form Data"}),"\n",(0,a.jsxs)(n.p,{children:["Form data can be retrieved by name using ",(0,a.jsx)(n.code,{children:"Context#FormValue(name string)"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'\te.POST("/form", func(c *echo.Context) error {\n\t\tname := c.FormValue("name")\n\t\treturn c.String(http.StatusOK, name)\n\t})\n'})}),"\n",(0,a.jsxs)(n.p,{children:["For types other than ",(0,a.jsx)(n.code,{children:"string"})," you can use ",(0,a.jsx)(n.code,{children:"echo.FormValue[t]"})," genetic type function."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'age, err := echo.FormValue[int](c, "age")\nif err != nil {\n\treturn err\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Test with:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"curl -X POST http://localhost:1323 -d 'name=Joe&age=30'\n"})}),"\n",(0,a.jsxs)(n.p,{children:["To bind a custom data type, you can implement ",(0,a.jsx)(n.code,{children:"Echo#BindUnmarshaler"})," interface."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:"type Timestamp time.Time\n\nfunc (t *Timestamp) UnmarshalParam(src string) error {\n  ts, err := time.Parse(time.RFC3339, src)\n  *t = Timestamp(ts)\n  return err\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,a.jsxs)(n.p,{children:["Query parameters can be retrieved by name using ",(0,a.jsx)(n.code,{children:"Context#QueryParam(name string)"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'// Handler\nfunc(c *echo.Context) error {\n  name := c.QueryParam("name")\n  return c.String(http.StatusOK, name)\n})\n'})}),"\n",(0,a.jsxs)(n.p,{children:["For types other than ",(0,a.jsx)(n.code,{children:"string"})," you can use ",(0,a.jsx)(n.code,{children:"echo.QueryParam[t]"})," genetic type function."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'age, err := echo.QueryParam[int](c, "age")\nif err != nil {\n\treturn err\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'curl -X GET "http://localhost:1323?name=Joe&age=30"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"path-parameters",children:"Path Parameters"}),"\n",(0,a.jsxs)(n.p,{children:["Registered path parameters can be retrieved by name using ",(0,a.jsx)(n.code,{children:"Context#Param(name string) string"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'e.GET("/users/:name", func(c *echo.Context) error {\n  name := c.Param("name")\n  return c.String(http.StatusOK, name)\n})\n'})}),"\n",(0,a.jsxs)(n.p,{children:["For types other than ",(0,a.jsx)(n.code,{children:"string"})," you can use ",(0,a.jsx)(n.code,{children:"echo.PathParam[t]"})," genetic type function."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'ID, err := echo.PathParam[int](c, "id")\nif err != nil {\n\treturn err\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"curl http://localhost:1323/users/Joe\ncurl http://localhost:1323/users/123\n"})}),"\n",(0,a.jsx)(n.h3,{id:"binding-data",children:"Binding Data"}),"\n",(0,a.jsxs)(n.p,{children:["Also binding of request data to native Go structs and variables is supported.\nSee ",(0,a.jsx)(n.a,{href:"/docs/binding",children:"Binding Data"})]}),"\n",(0,a.jsx)(n.h2,{id:"validate-data",children:"Validate Data"}),"\n",(0,a.jsxs)(n.p,{children:["Echo doesn't have built-in data validation capabilities, however, you can register\na custom validator using ",(0,a.jsx)(n.code,{children:"Echo#Validator"})," and leverage third-party ",(0,a.jsx)(n.a,{href:"https://github.com/avelino/awesome-go#validation",children:"libraries"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Example below uses ",(0,a.jsx)(n.a,{href:"https://github.com/go-playground/validator",children:"https://github.com/go-playground/validator"})," framework for validation:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"fmt"\n\t"net/http"\n\n\t"github.com/go-playground/validator/v10" // installed by `go get github.com/go-playground/validator/v10`\n\t"github.com/labstack/echo/v5"\n)\n\n\ntype CustomValidator struct {\n\tvalidator *validator.Validate\n}\n\nfunc (cv *CustomValidator) Validate(i any) error {\n\tif err := cv.validator.Struct(i); err != nil {\n\t\t// Optionally, you could return the error to give each route more control over the status code\n\t\treturn echo.ErrBadRequest.Wrap(err)\n\t}\n\treturn nil\n}\n\ntype User struct {\n\tName  string `json:"name" validate:"required"`\n\tEmail string `json:"email" validate:"required,email"`\n}\n\nfunc main() {\n\te := echo.New()\n\t\n\te.Validator = &CustomValidator{validator: validator.New()}\n\t\n\te.POST("/users", func(c *echo.Context) (err error) {\n\t\tu := new(User)\n\t\tif err = c.Bind(u); err != nil {\n\t\t\treturn err\n\t\t}\n\t\tif err = c.Validate(u); err != nil {\n\t\t\treturn err\n\t\t}\n\t\treturn c.JSON(http.StatusOK, u)\n\t})\n\t\n\tif err := e.Start(":1323"); err != nil {\n\t\te.Logger.Error("failed to start server", "error", err)\n\t}\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'curl -X POST http://localhost:1323/users \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{"name":"Joe","email":"joe@invalid-domain"}\'\n{"message":"Key: \'User.Email\' Error:Field validation for \'Email\' failed on the \'email\' tag"}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var t=r(6540);const a={},s=t.createContext(a);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);