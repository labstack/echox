"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8025],{8099:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"guide/templates","title":"Templates","description":"Using templates","source":"@site/docs/guide/templates.md","sourceDirName":"guide","slug":"/templates","permalink":"/docs/templates","draft":false,"unlisted":false,"editUrl":"https://github.com/labstack/echox/blob/master/website/docs/guide/templates.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"description":"Using templates","slug":"/templates","sidebar_position":12},"sidebar":"docsSidebar","previous":{"title":"Static Files","permalink":"/docs/static-files"},"next":{"title":"Testing","permalink":"/docs/testing"}}');var l=n(4848),s=n(8453);const a={description:"Using templates",slug:"/templates",sidebar_position:12},o="Templates",i={},c=[{value:"Rendering",id:"rendering",level:2},{value:"Advanced - Calling Echo from templates",id:"advanced---calling-echo-from-templates",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"templates",children:"Templates"})}),"\n",(0,l.jsx)(t.h2,{id:"rendering",children:"Rendering"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.code,{children:"Context#Render(code int, name string, data any) error"})," renders a template\nwith data and sends a text/html response with status code. Templates can be registered by setting ",(0,l.jsx)(t.code,{children:"Echo.Renderer"}),", allowing us to use any template engine."]}),"\n",(0,l.jsxs)(t.p,{children:["Example below shows how to use Go ",(0,l.jsx)(t.code,{children:"html/template"}),":"]}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsx)(t.li,{children:"Use default template renderer"}),"\n"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'e.Renderer = &echo.TemplateRenderer{\n\tTemplate: template.Must(template.New("hello").Parse("Hello, {{.}}!")),\n}\n'})}),"\n",(0,l.jsxs)(t.p,{children:["or Implement ",(0,l.jsx)(t.code,{children:"echo.Renderer"})," interface"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:"type Template struct {\n\ttemplates *template.Template\n}\n\nfunc (t *Template) Render(c *echo.Context, w io.Writer, name string, data any) error {\n\treturn t.templates.ExecuteTemplate(w, name, data)\n}\n"})}),"\n",(0,l.jsxs)(t.ol,{start:"2",children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Pre-compile templates"}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.code,{children:"public/views/hello.html"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-html",children:'{{define "hello"}}Hello, {{.}}!{{end}}\n'})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'t := &Template{\n    templates: template.Must(template.ParseGlob("public/views/*.html")),\n}\n'})}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Register templates"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'e := echo.New()\ne.Renderer = t\ne.GET("/hello", Hello)\n'})}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Render a template inside your handler"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'func Hello(c *echo.Context) error {\n\treturn c.Render(http.StatusOK, "hello", "World")\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"advanced---calling-echo-from-templates",children:"Advanced - Calling Echo from templates"}),"\n",(0,l.jsxs)(t.p,{children:["In certain situations it might be useful to generate URIs from the templates. In order to do so, you need to call ",(0,l.jsx)(t.code,{children:"Echo#Reverse"})," from the templates itself. Golang's ",(0,l.jsx)(t.code,{children:"html/template"})," package is not the best suited for this job, but this can be done in two ways: by providing a common method on all objects passed to templates or by passing ",(0,l.jsx)(t.code,{children:"map[string]any"})," and augmenting this object in the custom renderer. Given the flexibility of the latter approach, here is a sample program:"]}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.code,{children:"template.html"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-html",children:'<html>\n<body>\n<h1>Hello {{index . "name"}}</h1>\n\n<p>{{ with $x := index . "reverse" }}\n   {{ call $x "foobar" }} \x3c!--- this will call the $x with parameter "foobar" --\x3e\n   {{ end }}\n</p>\n</body>\n</html>\n'})}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.code,{children:"server.go"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"html/template"\n\t"io"\n\t"net/http"\n\n\t"github.com/labstack/echo/v5"\n)\n\n// TemplateRenderer is a custom html/template renderer for Echo framework\ntype TemplateRenderer struct {\n\ttemplates *template.Template\n}\n\n// Render renders a template document\nfunc (t *TemplateRenderer) Render(c *echo.Context, w io.Writer, name string, data any) error {\n\n\t// Add global methods if data is a map\n\tif viewContext, isMap := data.(map[string]any); isMap {\n\t\tviewContext["reverse"] = c.RouteInfo().Reverse\n\t}\n\n\treturn t.templates.ExecuteTemplate(w, name, data)\n}\n\nfunc main() {\n\te := echo.New()\n\te.Renderer = &TemplateRenderer{\n\t\ttemplates: template.Must(template.ParseGlob("main/*.html")),\n\t}\n\n\te.GET("/something/:name", func(c *echo.Context) error {\n\t\treturn c.Render(http.StatusOK, "template.html", map[string]any{\n\t\t\t"name": "Dolly!",\n\t\t})\n\t})\n\n\tif err := e.Start(":1323"); err != nil {\n\t\te.Logger.Error("shutting down the server", "error", err)\n\t}\n}\n'})})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var r=n(6540);const l={},s=r.createContext(l);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);